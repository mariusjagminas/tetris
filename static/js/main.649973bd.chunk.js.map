{"version":3,"sources":["components/cell/cell.js","components/row/row.js","components/field/field.js","components/modal/modal.js","components/nextFigureField/nextFigureField.js","figures.js","components/game/game.js","App.js","index.js"],"names":["Cell","_ref","cell","react_default","a","createElement","className","concat","Row","row","map","index","components_cell_cell","key","Field","field","components_row_row","Modal","gameOver","startGame","onClick","NextFigureField","nextFigureField","figures","path","Game","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","createField","height","width","array","y","x","getRandomFigure","randomNumber","Math","floor","random","length","lastRandomNumber","loop","includes","pathIndex","currentFigure","nextFigure","figurePath","drawFigure","figureCoord","setState","interval","setInterval","moveFigure","speed","handleKeyDown","e","isKeyDown","state","keyCode","moveFigureLeft","moveFigureRight","moveFigureDown","rotateFigure","figure","forEach","canMove","freezeFigure","clearInterval","clearFullRow","rowIndex","getFullRowIndex","i","isRowFull","_this2","document","addEventListener","_this3","canRotate","nextFigurePath","cellIndex","components_field_field","modal_modal","nextFigureField_nextFigureField","React","Component","App","Fragment","game_game","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.649973bd.chunk.js","sourcesContent":["import React from 'react'\r\nimport './cell.css'\r\n\r\nconst Cell =({cell}) =>{\r\n  return(\r\n    <div className={`cell ${cell === 1 ? 'active': cell === 2? 'freeze':''}`}></div>\r\n  )\r\n}\r\n\r\nexport default Cell","import React from \"react\";\r\nimport Cell from \"../cell/cell\";\r\nimport \"./row.css\";\r\n\r\nconst Row = ({ row }) => {\r\n  return (\r\n    <div className=\"row\">\r\n      {row.map((cell, index) => (\r\n        <Cell key={index} cell={cell} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Row;\r\n","import React from \"react\";\r\nimport Row from \"../row/row\";\r\nimport \"./field.css\";\r\n\r\nconst Field = ({ field }) => {\r\n  return (\r\n    <div className=\"field\">\r\n      {field.map((row, index) => (\r\n        <Row className=\"row\" key={index} row={row} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Field;\r\n","import React from \"react\";\r\nimport \"./modal.css\";\r\n\r\nconst Modal = ({gameOver,startGame}) => {\r\n \r\n  return (\r\n    <div className={`modal ${gameOver ? 'is-visible':''}`}>\r\n      <p className=\"modal__text\">Game Over</p>\r\n      <button className=\"modal__button\" onClick={startGame}>Restart Game</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Modal;\r\n","import React from \"react\";\r\nimport Row from \"../row/row\";\r\n\r\n\r\nconst NextFigureField = ({  nextFigureField }) => {\r\n  return (\r\n    <div className=\"field\">\r\n      {nextFigureField.map((row, index) => (\r\n        <Row className=\"row\" key={index} row={row} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default  NextFigureField;","export const figures = [\r\n  {\r\n    // figure: shape-left\r\n    path: [[[0, 0], [0, 1], [1, 1], [1, 2]], [[1, 0], [2, 0], [0, 1], [1, 1]]]\r\n  },\r\n  {\r\n    // figure: shape-right\r\n    path: [[[1, 0], [0, 1], [1, 1], [0, 2]], [[0, 0], [1, 0], [1, 1], [2, 1]]]\r\n  },\r\n  {\r\n    // figure: L-reverse\r\n    path: [\r\n      [[0, 0], [1, 0], [2, 0], [2, 1]],\r\n      [[1, 0], [1, 1], [1, 2], [0, 2]],\r\n      [[0, 0], [0, 1], [1, 1], [2, 1]],\r\n      [[0, 0], [1, 0], [0, 1], [0, 2]]\r\n    ]\r\n  },\r\n  {\r\n    // figure: L-normal\r\n    path: [\r\n      [[0, 0], [1, 0], [2, 0], [0, 1]],\r\n      [[0, 0], [1, 0], [1, 1], [1, 2]],\r\n      [[2, 0], [0, 1], [1, 1], [2, 1]],\r\n      [[0, 0], [0, 1], [0, 2], [1, 2]]\r\n    ]\r\n  },\r\n  {\r\n    // figure: line\r\n    path: [[[0, 0], [1, 0], [2, 0], [3, 0]], [[1, 0], [1, 1], [1, 2], [1, 3]]]\r\n  },\r\n  {\r\n    // figure: T\r\n    path: [\r\n      [[0, 0], [1, 0], [2, 0], [1, 1]],\r\n      [[1, 0], [1, 1], [1, 2], [0, 1]],\r\n      [[1, 0], [0, 1], [1, 1], [2, 1]],\r\n      [[0, 0], [0, 1], [0, 2], [1, 1]]\r\n    ]\r\n  }\r\n];\r\n","import React from \"react\";\r\nimport Field from \"../field/field\";\r\nimport Modal from \"../modal/modal\";\r\nimport NextFigureField from \"../nextFigureField/nextFigureField\";\r\nimport \"./game.css\";\r\nimport { figures } from \"../../figures\";\r\n\r\nclass Game extends React.Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      field: [[]],\r\n      nextFigureField: [[]],\r\n      gameOver: false\r\n    };\r\n\r\n    this.speed = 800;\r\n    this.field = this.createField(14, 8);\r\n    this.nextFigureField = this.createField(5, 5);\r\n    this.pathIndex = 0;\r\n    this.isKeyDown = true;\r\n    this.figureCoord = { x: 0, y: 0 };\r\n    this.lastRandomNumber = null;\r\n    this.currentFigure = null;\r\n    this.figurePath = null;\r\n    this.figures = figures;\r\n  }\r\n\r\n  createField = (height, width) => {\r\n    let array = [];\r\n    for (let y = 0; y < height; y++) {\r\n      array[y] = [];\r\n      for (let x = 0; x < width; x++) {\r\n        array[y][x] = 0;\r\n      }\r\n    }\r\n    return array;\r\n  };\r\n\r\n  getRandomFigure = () => {\r\n    const randomNumber = Math.floor(Math.random() * this.figures.length);\r\n    if (this.lastRandomNumber === randomNumber) this.getRandomFigure();\r\n    this.lastRandomNumber = randomNumber;\r\n    return this.figures[randomNumber];\r\n  };\r\n\r\n  componentDidMount() {\r\n    document.addEventListener(\"keydown\", this.handleKeyDown);\r\n    document.addEventListener(\"keyup\", () => (this.isKeyDown = true));\r\n    this.nextFigure = this.getRandomFigure(); ///////////////////////////////////\r\n    this.loop();\r\n  }\r\n\r\n  loop = () => {\r\n    if (this.field[0].includes(2)) {\r\n      this.gameOver();\r\n      return;\r\n    }\r\n    this.pathIndex = 0;\r\n    this.nextFigureField = this.nextFigureField.map(row =>\r\n      row.map(cell => (cell = 0))\r\n    );\r\n    this.currentFigure = this.nextFigure;\r\n    this.figurePath = this.currentFigure.path[0];\r\n    this.drawFigure(\r\n      this.field,\r\n      this.figurePath,\r\n      this.figureCoord.x,\r\n      this.figureCoord.y\r\n    );\r\n    this.nextFigure = this.getRandomFigure();\r\n    this.drawFigure(this.nextFigureField, this.nextFigure.path[0], 1, 1);\r\n    this.setState({ field: this.field, nextFigureField: this.nextFigureField });\r\n    this.interval = setInterval(this.moveFigure, this.speed);\r\n  };\r\n\r\n  handleKeyDown = e => {\r\n    if (!this.isKeyDown || this.state.gameOver) return;\r\n    switch (e.keyCode) {\r\n      case 37:\r\n        this.moveFigureLeft();\r\n        break;\r\n      case 39:\r\n        this.moveFigureRight();\r\n        break;\r\n      case 40:\r\n        this.moveFigureDown();\r\n        break;\r\n      case 38:\r\n        this.rotateFigure();\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n  };\r\n\r\n  drawFigure = (field, figure, x, y) => {\r\n    figure.forEach(path => {\r\n      field[path[1] + y][path[0] + x] = 1;\r\n    });\r\n  };\r\n\r\n  moveFigure = () => {\r\n    // check if figure can be moved down\r\n    let canMove = true;\r\n    for (let y = this.field.length - 1; y >= 0; y--) {\r\n      for (let x = 0; x <= this.field[y].length - 1; x++) {\r\n        if (this.field[y][x] === 1) {\r\n          if (y + 1 === this.field.length || this.field[y + 1][x] === 2) {\r\n            canMove = false;\r\n            this.freezeFigure();\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // move a figure down\r\n    if (canMove) {\r\n      this.figureCoord.y++;\r\n      for (let y = this.field.length - 1; y >= 0; y--) {\r\n        for (let x = 0; x <= this.field[y].length - 1; x++) {\r\n          if (this.field[y][x] === 1) {\r\n            this.field[y][x] = 0;\r\n            this.field[y + 1][x] = 1;\r\n          }\r\n        }\r\n      }\r\n      this.setState({ field: this.field });\r\n    }\r\n  };\r\n\r\n  moveFigureLeft = () => {\r\n    this.isKeyDown = false;\r\n    // check if figure can move to left\r\n    let canMove = true;\r\n    for (let x = 0; x <= this.field[1].length - 1; x++) {\r\n      for (let y = 0; y <= this.field.length - 1; y++) {\r\n        if (this.field[y][x] === 1) {\r\n          if (x <= 0 || this.field[y][x - 1] === 2) {\r\n            canMove = false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // move figure to left\r\n    if (canMove) {\r\n      this.figureCoord.x--;\r\n      for (let x = 0; x <= this.field[1].length - 1; x++) {\r\n        for (let y = 0; y <= this.field.length - 1; y++) {\r\n          if (this.field[y][x] === 1) {\r\n            this.field[y][x] = 0;\r\n            this.field[y][x - 1] = 1;\r\n          }\r\n        }\r\n      }\r\n      this.setState({ field: this.field });\r\n    }\r\n  };\r\n\r\n  moveFigureRight = () => {\r\n    this.isKeyDown = false;\r\n    let canMove = true;\r\n    for (let x = this.field[1].length - 1; x >= 0; x--) {\r\n      for (let y = 0; y <= this.field.length - 1; y++) {\r\n        if (this.field[y][x] === 1) {\r\n          if (x >= this.field[1].length - 1 || this.field[y][x + 1] === 2) {\r\n            canMove = false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // move figure to right\r\n    if (canMove) {\r\n      this.figureCoord.x++;\r\n      for (let x = this.field[1].length - 1; x >= 0; x--) {\r\n        for (let y = 0; y <= this.field.length - 1; y++) {\r\n          if (this.field[y][x] === 1) {\r\n            this.field[y][x] = 0;\r\n            this.field[y][x + 1] = 1;\r\n          }\r\n        }\r\n      }\r\n      this.setState({ field: this.field });\r\n    }\r\n  };\r\n\r\n  moveFigureDown = () => {\r\n    this.isKeyDown = false;\r\n    clearInterval(this.interval);\r\n    this.interval = setInterval(this.moveFigure, 10);\r\n  };\r\n\r\n  rotateFigure() {\r\n    this.isKeyDown = false;\r\n    // check if figure has space to rotate\r\n    let canRotate = true;\r\n    this.nextFigurePath = this.currentFigure.path[this.pathIndex + 1];\r\n    this.nextFigurePath.forEach(path => {\r\n      const x = path[0] + this.figureCoord.x;\r\n      const y = path[1] + this.figureCoord.y;\r\n      if (\r\n        x >= this.field[0].length ||\r\n        y >= this.field.length ||\r\n        this.field[y][x] === 2\r\n      ) {\r\n        canRotate = false;\r\n      }\r\n    });\r\n\r\n    if (canRotate) {\r\n      this.pathIndex =\r\n        this.pathIndex >= this.currentFigure.path.length - 2\r\n          ? -1\r\n          : this.pathIndex + 1;\r\n      this.figurePath = this.nextFigurePath;\r\n      // flush cells\r\n      this.field.forEach((row, rowIndex) =>\r\n        row.forEach((cell, cellIndex) => {\r\n          if (cell === 1) {\r\n            this.field[rowIndex][cellIndex] = 0;\r\n          }\r\n        })\r\n      );\r\n      this.drawFigure(\r\n        this.field,\r\n        this.figurePath,\r\n        this.figureCoord.x,\r\n        this.figureCoord.y\r\n      );\r\n      this.setState({ field: this.field });\r\n    }\r\n  }\r\n\r\n  freezeFigure = () => {\r\n    clearInterval(this.interval);\r\n    for (let y = this.field.length - 1; y >= 0; y--) {\r\n      for (let x = 0; x <= this.field[y].length - 1; x++) {\r\n        if (this.field[y][x] === 1) {\r\n          this.field[y][x] = 2;\r\n        }\r\n      }\r\n    }\r\n    this.figureCoord.x = 0;\r\n    this.figureCoord.y = 0;\r\n    this.setState({ field: this.field });\r\n    this.clearFullRow();\r\n    this.loop();\r\n  };\r\n\r\n  clearFullRow = () => {\r\n    const rowIndex = this.getFullRowIndex();\r\n    if (!rowIndex) return;\r\n    for (let i = rowIndex; i > 0; i--) {\r\n      for (let x = 0; x < this.field[0].length; x++) {\r\n        this.field[i][x] = this.field[i - 1][x];\r\n      }\r\n    }\r\n    this.clearFullRow();\r\n  };\r\n\r\n  getFullRowIndex = () => {\r\n    let isRowFull;\r\n    for (let y = this.field.length - 1; y >= 0; y--) {\r\n      isRowFull = true;\r\n      for (let x = 0; x <= this.field[y].length - 1; x++) {\r\n        if (this.field[y][x] === 0) {\r\n          isRowFull = false;\r\n        }\r\n      }\r\n      if (isRowFull) {\r\n        return y;\r\n      }\r\n    }\r\n    return false;\r\n  };\r\n\r\n  gameOver = () => {\r\n    this.setState({ gameOver: true });\r\n    clearInterval(this.interval);\r\n  };\r\n\r\n  startGame = () => {\r\n    this.setState({ gameOver: false });\r\n    this.field = this.field.map(row => row.map(cell => (cell = 0)));\r\n    this.loop();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"game\">\r\n        <Field field={this.state.field} />\r\n        <Modal gameOver={this.state.gameOver} startGame={this.startGame} />\r\n        <NextFigureField nextFigureField={this.state.nextFigureField} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Game;\r\n","import React from \"react\";\r\nimport Game from \"./components/game/game\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <>\r\n      <Game />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css'\r\nimport App from './App';\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}