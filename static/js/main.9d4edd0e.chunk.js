(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,r){e.exports=r(19)},,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(0),i=r.n(n),a=r(2),l=r.n(a),f=(r(14),r(3)),o=r(4),u=r(6),d=r(5),c=r(7),s=(r(15),function(e){var t=e.cell;return i.a.createElement("div",{className:"cell ".concat(1===t?"active":2===t?"freeze":"")})}),g=(r(16),function(e){var t=e.row;return i.a.createElement("div",{className:"row"},t.map(function(e,t){return i.a.createElement(s,{key:t,cell:e})}))}),h=(r(17),r(18),function(e){var t=e.gameOver,r=e.startGame;return i.a.createElement("div",{className:"modal ".concat(t?"is-visible":"")},i.a.createElement("p",{className:"modal__text"},"Game Over"),i.a.createElement("button",{className:"modal__button",onClick:r},"Restart Game"))}),v=function(e){function t(){var e;return Object(f.a)(this,t),(e=Object(u.a)(this,Object(d.a)(t).call(this))).createField=function(e,t){for(var r=[],n=0;n<e;n++){r[n]=[];for(var i=0;i<t;i++)r[n][i]=0}return r},e.getRandomFigure=function(){var t=Math.floor(Math.random()*e.figures.length);return e.lastRandomNumber===t&&e.getRandomFigure(),e.lastRandomNumber=t,e.figures[t]},e.loop=function(){e.field[0].includes(2)?e.gameOver():(e.pathIndex=0,e.currentFigure=e.getRandomFigure(),e.figurePath=e.currentFigure.path[0],e.drawFigure(),e.setState({field:e.field}),e.interval=setInterval(e.moveFigure,e.speed))},e.handleKeyDown=function(t){if(e.isKeyDown&&!e.state.gameOver)switch(t.keyCode){case 37:e.moveFigureLeft();break;case 39:e.moveFigureRight();break;case 40:e.moveFigureDown();break;case 38:e.rotateFigure();break;default:return}},e.drawFigure=function(){e.figurePath.forEach(function(t){e.field[t[1]+e.figureCoord.y][t[0]+e.figureCoord.x]=1})},e.moveFigure=function(){for(var t=!0,r=e.field.length-1;r>=0;r--)for(var n=0;n<=e.field[r].length-1;n++)1===e.field[r][n]&&(r+1!==e.field.length&&2!==e.field[r+1][n]||(t=!1,e.freezeFigure()));if(t){e.figureCoord.y++;for(var i=e.field.length-1;i>=0;i--)for(var a=0;a<=e.field[i].length-1;a++)1===e.field[i][a]&&(e.field[i][a]=0,e.field[i+1][a]=1);e.setState({field:e.field})}},e.moveFigureLeft=function(){e.isKeyDown=!1;for(var t=!0,r=0;r<=e.field[1].length-1;r++)for(var n=0;n<=e.field.length-1;n++)1===e.field[n][r]&&(r<=0||2===e.field[n][r-1])&&(t=!1);if(t){e.figureCoord.x--;for(var i=0;i<=e.field[1].length-1;i++)for(var a=0;a<=e.field.length-1;a++)1===e.field[a][i]&&(e.field[a][i]=0,e.field[a][i-1]=1);e.setState({field:e.field})}},e.moveFigureRight=function(){e.isKeyDown=!1;for(var t=!0,r=e.field[1].length-1;r>=0;r--)for(var n=0;n<=e.field.length-1;n++)1===e.field[n][r]&&(r>=e.field[1].length-1||2===e.field[n][r+1])&&(t=!1);if(t){e.figureCoord.x++;for(var i=e.field[1].length-1;i>=0;i--)for(var a=0;a<=e.field.length-1;a++)1===e.field[a][i]&&(e.field[a][i]=0,e.field[a][i+1]=1);e.setState({field:e.field})}},e.moveFigureDown=function(){e.isKeyDown=!1,clearInterval(e.interval),e.interval=setInterval(e.moveFigure,10)},e.freezeFigure=function(){clearInterval(e.interval);for(var t=e.field.length-1;t>=0;t--)for(var r=0;r<=e.field[t].length-1;r++)1===e.field[t][r]&&(e.field[t][r]=2);e.figureCoord.x=0,e.figureCoord.y=0,e.setState({field:e.field}),e.clearFullRow(),e.loop()},e.clearFullRow=function(){var t=e.getFullRowIndex();if(t){for(var r=t;r>0;r--)for(var n=0;n<e.field[0].length;n++)e.field[r][n]=e.field[r-1][n];e.clearFullRow()}},e.getFullRowIndex=function(){for(var t,r=e.field.length-1;r>=0;r--){t=!0;for(var n=0;n<=e.field[r].length-1;n++)0===e.field[r][n]&&(t=!1);if(t)return r}return!1},e.gameOver=function(){e.setState({gameOver:!0}),clearInterval(e.interval)},e.startGame=function(){e.setState({gameOver:!1}),e.field=e.field.map(function(e){return e.map(function(e){return 0})}),e.loop()},e.state={field:[[]],gameOver:!1},e.speed=800,e.field=e.createField(14,8),e.pathIndex=0,e.isKeyDown=!0,e.figureCoord={x:0,y:0},e.lastRandomNumber=null,e.currentFigure=null,e.figurePath=null,e.figures=[{path:[[[0,0],[0,1],[1,1],[1,2]],[[1,0],[2,0],[0,1],[1,1]]]},{path:[[[1,0],[0,1],[1,1],[0,2]],[[0,0],[1,0],[1,1],[2,1]]]},{path:[[[0,0],[1,0],[2,0],[2,1]],[[1,0],[1,1],[1,2],[0,2]],[[0,0],[0,1],[1,1],[2,1]],[[0,0],[1,0],[0,1],[0,2]]]},{path:[[[0,0],[1,0],[2,0],[0,1]],[[0,0],[1,0],[1,1],[1,2]],[[2,0],[0,1],[1,1],[2,1]],[[0,0],[0,1],[0,2],[1,2]]]},{path:[[[0,0],[1,0],[2,0],[3,0]],[[1,0],[1,1],[1,2],[1,3]]]},{path:[[[0,0],[1,0],[2,0],[1,1]],[[1,0],[1,1],[1,2],[0,1]],[[1,0],[0,1],[1,1],[2,1]],[[0,0],[0,1],[0,2],[1,1]]]}],e}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",function(){return e.isKeyDown=!0}),this.loop()}},{key:"rotateFigure",value:function(){var e=this;this.isKeyDown=!1;var t=!0;this.nextFigurePath=this.currentFigure.path[this.pathIndex+1],this.nextFigurePath.forEach(function(r){var n=r[0]+e.figureCoord.x,i=r[1]+e.figureCoord.y;(n>=e.field[0].length||i>=e.field.length||2===e.field[i][n])&&(t=!1)}),t&&(this.pathIndex=this.pathIndex>=this.currentFigure.path.length-2?-1:this.pathIndex+1,this.figurePath=this.nextFigurePath,this.field.forEach(function(t,r){return t.forEach(function(t,n){1===t&&(e.field[r][n]=0)})}),this.drawFigure(),this.setState({field:this.field}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"field"},this.state.field.map(function(e,t){return i.a.createElement(g,{className:"row",key:t,row:e})})),i.a.createElement(h,{gameOver:this.state.gameOver,startGame:this.startGame}))}}]),t}(i.a.Component),m=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(v,null))};l.a.render(i.a.createElement(m,null),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.9d4edd0e.chunk.js.map