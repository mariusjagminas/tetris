(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(e,t,a){},,,,,,,function(e,t,a){},,function(e,t,a){e.exports=a(23)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(9),l=a.n(i),o=(a(16),a(2)),u=a(3),c=a(5),d=a(4),f=a(6),s=(a(17),function(e){var t=e.cell;return n.a.createElement("div",{className:"cell ".concat(1===t?"active":2===t?"freeze":"")})}),m=(a(18),function(e){var t=e.row;return n.a.createElement("div",{className:"row"},t.map(function(e,t){return n.a.createElement(s,{key:t,cell:e})}))}),h=(a(19),function(e){var t=e.field;return n.a.createElement("div",{className:"field"},t.map(function(e,t){return n.a.createElement(m,{className:"row",key:t,row:e})}))}),g=(a(20),function(e){var t=e.gameOver;return n.a.createElement("div",{className:"modal ".concat(t?"is-visible":"")},n.a.createElement("p",{className:"modal__text"},"Game Over"))}),v=function(e){var t=e.nextFigureField;return n.a.createElement("div",{className:"field"},t.map(function(e,t){return n.a.createElement(m,{className:"row",key:t,row:e})}))},F=(a(21),[{path:[[[0,0],[0,1],[1,1],[1,2]],[[1,0],[2,0],[0,1],[1,1]]]},{path:[[[1,0],[0,1],[1,1],[0,2]],[[0,0],[1,0],[1,1],[2,1]]]},{path:[[[0,0],[1,0],[2,0],[2,1]],[[1,0],[1,1],[1,2],[0,2]],[[0,0],[0,1],[1,1],[2,1]],[[0,0],[1,0],[0,1],[0,2]]]},{path:[[[0,0],[1,0],[2,0],[0,1]],[[0,0],[1,0],[1,1],[1,2]],[[2,0],[0,1],[1,1],[2,1]],[[0,0],[0,1],[0,2],[1,2]]]},{path:[[[0,0],[1,0],[2,0],[3,0]],[[1,0],[1,1],[1,2],[1,3]]]},{path:[[[0,0],[1,0],[2,0],[1,1]],[[1,0],[1,1],[1,2],[0,1]],[[1,0],[0,1],[1,1],[2,1]],[[0,0],[0,1],[0,2],[1,1]]]}]),p=(a(22),a(1),function(e){var t=e.handleClickButton;return n.a.createElement("div",{onClick:t,"data-arrow":"up",className:"arrow arrow--up"},n.a.createElement("div",{className:"arrow__content"}))}),w=function(e){var t=e.handleClickButton;return n.a.createElement("div",{onClick:t,"data-arrow":"down",className:"arrow arrow--down"},n.a.createElement("div",{className:"arrow__content"}))},k=function(e){var t=e.handleClickButton;return n.a.createElement("div",{onClick:t,"data-arrow":"left",className:"arrow arrow--left"},n.a.createElement("div",{className:"arrow__content"}))},E=function(e){var t=e.handleClickButton;return n.a.createElement("div",{onClick:t,"data-arrow":"right",className:"arrow arrow--right"},n.a.createElement("div",{className:"arrow__content"}))},C=(a(8),function(e){var t=e.pauseGame;return n.a.createElement("button",{className:"btn btn--pause",onClick:t},"Pause")}),x=function(e){var t=e.startGame;return n.a.createElement("button",{className:"btn btn--start",onClick:t}," Start")},b=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(d.a)(t).call(this))).handleClickButton=function(e){var t=document.querySelector(".control-panel__arrows-wrapper"),r=e.target.dataset.arrow;t.classList.add(r),setTimeout(function(){t.classList.remove(r)},300),a.handleClick(e)},a.handleClick=e.handleClick,a.pauseGame=e.pauseGame,a.startGame=e.startGame,a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"control-panel"},n.a.createElement("div",{className:"control-panel__arrows-wrapper"},n.a.createElement(p,{handleClickButton:this.handleClickButton}),n.a.createElement(w,{handleClickButton:this.handleClickButton}),n.a.createElement(k,{handleClickButton:this.handleClickButton}),n.a.createElement(E,{handleClickButton:this.handleClickButton})),n.a.createElement(C,{pauseGame:this.pauseGame}),n.a.createElement(x,{startGame:this.startGame}))}}]),t}(n.a.PureComponent),y=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(d.a)(t).call(this))).createField=function(e,t){for(var a=[],r=0;r<e;r++){a[r]=[];for(var n=0;n<t;n++)a[r][n]=0}return a},e.getRandomFigure=function(){var t=Math.floor(Math.random()*e.figures.length);return e.lastRandomNumber===t&&e.getRandomFigure(),e.lastRandomNumber=t,e.figures[t]},e.loop=function(){e.field[0].includes(2)?e.gameOver():(e.pathIndex=0,e.nextFigureField=e.nextFigureField.map(function(e){return e.map(function(e){return 0})}),e.currentFigure=e.nextFigure,e.figurePath=e.currentFigure.path[0],e.drawFigure(e.field,e.figurePath,e.figureCoord.x,e.figureCoord.y),e.nextFigure=e.getRandomFigure(),e.drawFigure(e.nextFigureField,e.nextFigure.path[0],1,1),e.setState({field:e.field,nextFigureField:e.nextFigureField}),e.interval=setInterval(e.moveFigure,e.speed))},e.handleKeyDown=function(t){if(e.isKeyDown&&!e.state.gameOver&&!e.paused)switch(t.keyCode){case 37:e.isKeyDown=!1,e.moveFigureLeft();break;case 39:e.isKeyDown=!1,e.moveFigureRight();break;case 40:e.isKeyDown=!1,e.moveFigureDown();break;case 38:e.isKeyDown=!1,e.rotateFigure();break;default:return}},e.handleClick=function(t){if(!e.state.gameOver&&!e.paused)switch(t.target.dataset.arrow){case"left":e.moveFigureLeft();break;case"right":e.moveFigureRight();break;case"down":e.moveFigureDown();break;case"up":e.rotateFigure();break;default:return}},e.drawFigure=function(e,t,a,r){t.forEach(function(t){e[t[1]+r][t[0]+a]=1})},e.moveFigure=function(){for(var t=!0,a=e.field.length-1;a>=0;a--)for(var r=0;r<=e.field[a].length-1;r++)1===e.field[a][r]&&(a+1!==e.field.length&&2!==e.field[a+1][r]||(t=!1,e.freezeFigure()));if(t){e.figureCoord.y++;for(var n=e.field.length-1;n>=0;n--)for(var i=0;i<=e.field[n].length-1;i++)1===e.field[n][i]&&(e.field[n][i]=0,e.field[n+1][i]=1);e.setState({field:e.field})}},e.moveFigureLeft=function(){for(var t=!0,a=0;a<=e.field[1].length-1;a++)for(var r=0;r<=e.field.length-1;r++)1===e.field[r][a]&&(a<=0||2===e.field[r][a-1])&&(t=!1);if(t){e.figureCoord.x--;for(var n=0;n<=e.field[1].length-1;n++)for(var i=0;i<=e.field.length-1;i++)1===e.field[i][n]&&(e.field[i][n]=0,e.field[i][n-1]=1);e.setState({field:e.field})}},e.moveFigureRight=function(){for(var t=!0,a=e.field[1].length-1;a>=0;a--)for(var r=0;r<=e.field.length-1;r++)1===e.field[r][a]&&(a>=e.field[1].length-1||2===e.field[r][a+1])&&(t=!1);if(t){e.figureCoord.x++;for(var n=e.field[1].length-1;n>=0;n--)for(var i=0;i<=e.field.length-1;i++)1===e.field[i][n]&&(e.field[i][n]=0,e.field[i][n+1]=1);e.setState({field:e.field})}},e.moveFigureDown=function(){clearInterval(e.interval),e.interval=setInterval(e.moveFigure,10)},e.freezeFigure=function(){clearInterval(e.interval);for(var t=e.field.length-1;t>=0;t--)for(var a=0;a<=e.field[t].length-1;a++)1===e.field[t][a]&&(e.field[t][a]=2);e.figureCoord.x=0,e.figureCoord.y=0,e.setState({field:e.field}),e.clearFullRow(),e.loop()},e.clearFullRow=function(){var t=e.getFullRowIndex();if(t){for(var a=t;a>0;a--)for(var r=0;r<e.field[0].length;r++)e.field[a][r]=e.field[a-1][r];e.clearFullRow()}},e.getFullRowIndex=function(){for(var t,a=e.field.length-1;a>=0;a--){t=!0;for(var r=0;r<=e.field[a].length-1;r++)0===e.field[a][r]&&(t=!1);if(t)return a}return!1},e.gameOver=function(){e.setState({gameOver:!0}),clearInterval(e.interval)},e.startGame=function(){e.state.gameOver&&(e.setState({gameOver:!1}),e.field=e.field.map(function(e){return e.map(function(e){return 0})}),e.loop())},e.pauseGame=function(){e.state.gameOver||(console.log("PAUSE"),e.paused?(e.interval=setInterval(e.moveFigure,e.speed),e.paused=!1):(clearInterval(e.interval),e.paused=!0))},e.state={field:[[]],nextFigureField:[[]],gameOver:!1},e.speed=800,e.field=e.createField(20,10),e.nextFigureField=e.createField(5,5),e.pathIndex=0,e.isKeyDown=!0,e.figureCoord={x:0,y:0},e.lastRandomNumber=null,e.currentFigure=null,e.figurePath=null,e.figures=F,e.paused=!1,e}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",function(){return e.isKeyDown=!0}),this.nextFigure=this.getRandomFigure(),this.loop()}},{key:"rotateFigure",value:function(){var e=this,t=!0;this.nextFigurePath=this.currentFigure.path[this.pathIndex+1],this.nextFigurePath.forEach(function(a){var r=a[0]+e.figureCoord.x,n=a[1]+e.figureCoord.y;(r>=e.field[0].length||n>=e.field.length||2===e.field[n][r])&&(t=!1)}),t&&(this.pathIndex=this.pathIndex>=this.currentFigure.path.length-2?-1:this.pathIndex+1,this.figurePath=this.nextFigurePath,this.field.forEach(function(t,a){return t.forEach(function(t,r){1===t&&(e.field[a][r]=0)})}),this.drawFigure(this.field,this.figurePath,this.figureCoord.x,this.figureCoord.y),this.setState({field:this.field}))}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"game"},n.a.createElement(h,{field:this.state.field}),n.a.createElement(g,{gameOver:this.state.gameOver,startGame:this.startGame}),n.a.createElement(v,{nextFigureField:this.state.nextFigureField})),n.a.createElement(b,{handleClick:this.handleClick,pauseGame:this.pauseGame,startGame:this.startGame}))}}]),t}(n.a.Component),N=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(y,null))};l.a.render(n.a.createElement(N,null),document.getElementById("root"))}],[[10,1,2]]]);
//# sourceMappingURL=main.0b009860.chunk.js.map