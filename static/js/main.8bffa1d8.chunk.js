(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(e,t,a){},,,,,,,function(e,t,a){},,,,function(e,t,a){e.exports=a(31)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,function(e,t,a){},function(e,t,a){"use strict";a.r(t);var r=a(0),i=a.n(r),n=a(9),l=a.n(n),o=(a(18),a(2)),s=a(3),c=a(5),u=a(4),d=a(6),f=(a(19),function(e){var t=e.cell;return i.a.createElement("div",{className:"cell ".concat(1===t?"active":2===t?"freeze":"")})}),m=(a(20),function(e){var t=e.row;return i.a.createElement("div",{className:"row"},t.map(function(e,t){return i.a.createElement(f,{key:t,cell:e})}))}),h=(a(21),function(e){var t=e.field;return i.a.createElement("div",{className:"field"},t.map(function(e,t){return i.a.createElement(m,{className:"row",key:t,row:e})}))}),v=(a(22),function(e){var t=e.nextFigureField;return i.a.createElement("div",{className:"field next-figure"},i.a.createElement("div",{className:"next-figure__title"},"NEXT"),t.map(function(e,t){return i.a.createElement(m,{className:"row",key:t,row:e})}))}),g=(a(23),[{path:[[[0,0],[0,1],[1,1],[1,2]],[[1,0],[2,0],[0,1],[1,1]]]},{path:[[[1,0],[0,1],[1,1],[0,2]],[[0,0],[1,0],[1,1],[2,1]]]},{path:[[[0,0],[1,0],[2,0],[2,1]],[[1,0],[1,1],[1,2],[0,2]],[[0,0],[0,1],[1,1],[2,1]],[[0,0],[1,0],[0,1],[0,2]]]},{path:[[[0,0],[1,0],[2,0],[0,1]],[[0,0],[1,0],[1,1],[1,2]],[[2,0],[0,1],[1,1],[2,1]],[[0,0],[0,1],[0,2],[1,2]]]},{path:[[[0,0],[1,0],[2,0],[3,0]],[[1,0],[1,1],[1,2],[1,3]]]},{path:[[[0,0],[1,0],[2,0],[1,1]],[[1,0],[1,1],[1,2],[0,1]],[[1,0],[0,1],[1,1],[2,1]],[[0,0],[0,1],[0,2],[1,1]]]}]),p=(a(24),a(1),function(e){var t=e.handleClickButton;return i.a.createElement("div",{onClick:t,"data-arrow":"up",className:"arrow arrow--up"},i.a.createElement("div",{className:"arrow__content"}))}),F=function(e){var t=e.handleClickButton;return i.a.createElement("div",{onClick:t,"data-arrow":"down",className:"arrow arrow--down"},i.a.createElement("div",{className:"arrow__content"}))},E=function(e){var t=e.handleClickButton;return i.a.createElement("div",{onClick:t,"data-arrow":"left",className:"arrow arrow--left"},i.a.createElement("div",{className:"arrow__content"}))},w=function(e){var t=e.handleClickButton;return i.a.createElement("div",{onClick:t,"data-arrow":"right",className:"arrow arrow--right"},i.a.createElement("div",{className:"arrow__content"}))},k=(a(8),function(e){var t=e.pauseGame,a=e.isPaused;return i.a.createElement("button",{className:"btn btn--pause ".concat(a?"isPaused":""),onClick:t})}),C=a(11),b=function(e){var t=e.startGame,a=e.isGameOver,n=Object(r.useState)(),l=Object(C.a)(n,2),o=l[0],s=l[1];return i.a.createElement("button",{className:"btn btn--start ".concat(o),onClick:function(){t(),a&&(s("start"),setTimeout(function(){return s("")},200))}})},x=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this))).handleClickButton=function(e){var t=document.querySelector(".control-panel__arrows-wrapper"),r=e.target.dataset.arrow;t.classList.add(r),setTimeout(function(){t.classList.remove(r)},300),a.handleClick(e)},a.handleClick=e.handleClick,a.pauseGame=e.pauseGame,a.startGame=e.startGame,a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"control-panel"},i.a.createElement("div",{className:"control-panel__arrows-wrapper"},i.a.createElement(p,{handleClickButton:this.handleClickButton}),i.a.createElement(F,{handleClickButton:this.handleClickButton}),i.a.createElement(E,{handleClickButton:this.handleClickButton}),i.a.createElement(w,{handleClickButton:this.handleClickButton})),i.a.createElement("div",{className:"control-panel__buttons-wrapper"},i.a.createElement(k,{pauseGame:this.pauseGame,isPaused:this.props.isPaused}),i.a.createElement(b,{startGame:this.startGame,isGameOver:this.props.isGameOver})))}}]),t}(i.a.PureComponent),N=(a(25),function(e){var t=e.title,a=e.score;return i.a.createElement("div",{className:"score-board"},i.a.createElement("div",{className:"score-board__title"},t),i.a.createElement("div",{className:"score-board__score"},a))}),G=(a(26),function(e){var t=e.isGameOver;return i.a.createElement("div",{className:"game-over ".concat(t?"visible":"")},i.a.createElement("div",{className:"game-over__text"},"GAME"),i.a.createElement("div",{className:"game-over__text"},"OVER"))}),S=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(u.a)(t).call(this))).createField=function(e,t){for(var a=[],r=0;r<e;r++){a[r]=[];for(var i=0;i<t;i++)a[r][i]=0}return a},e.getRandomFigure=function(){var t=Math.floor(Math.random()*e.figures.length);return e.lastRandomNumber===t&&e.getRandomFigure(),e.lastRandomNumber=t,e.figures[t]},e.loop=function(){e.field[0].includes(2)?e.gameOver():(e.pathIndex=0,e.nextFigureField=e.nextFigureField.map(function(e){return e.map(function(e){return 0})}),e.currentFigure=e.nextFigure,e.figurePath=e.currentFigure.path[0],e.drawFigure(e.field,e.figurePath,e.figureCoord.x,e.figureCoord.y),e.nextFigure=e.getRandomFigure(),e.drawFigure(e.nextFigureField,e.nextFigure.path[0],1,1),e.setState({field:e.field,nextFigureField:e.nextFigureField}),e.interval=setInterval(e.moveFigure,e.speed))},e.handleKeyDown=function(t){if(e.isKeyUp){if(!e.state.isPaused&&!e.state.isGameOver)switch(t.keyCode){case 37:e.isKeyUp=!1,e.moveFigureLeft();break;case 39:e.isKeyUp=!1,e.moveFigureRight();break;case 40:e.isKeyUp=!1,e.moveFigureDown();break;case 38:e.isKeyUp=!1,e.rotateFigure()}switch(t.keyCode){case 80:e.isKeyUp=!1,e.pauseGame();break;case 83:e.isKeyUp=!1,e.startGame();break;default:return}}},e.handleClick=function(t){if(!e.state.isGameOver&&!e.state.isPaused)switch(t.target.dataset.arrow){case"left":e.moveFigureLeft();break;case"right":e.moveFigureRight();break;case"down":e.moveFigureDown();break;case"up":e.rotateFigure();break;default:return}},e.drawFigure=function(e,t,a,r){t.forEach(function(t){e[t[1]+r][t[0]+a]=1})},e.moveFigure=function(){for(var t=!0,a=e.field.length-1;a>=0;a--)for(var r=0;r<=e.field[a].length-1;r++)1===e.field[a][r]&&(a+1!==e.field.length&&2!==e.field[a+1][r]||(t=!1,e.freezeFigure()));if(t){e.figureCoord.y++;for(var i=e.field.length-1;i>=0;i--)for(var n=0;n<=e.field[i].length-1;n++)1===e.field[i][n]&&(e.field[i][n]=0,e.field[i+1][n]=1);e.setState({field:e.field})}},e.moveFigureLeft=function(){for(var t=!0,a=0;a<=e.field[1].length-1;a++)for(var r=0;r<=e.field.length-1;r++)1===e.field[r][a]&&(a<=0||2===e.field[r][a-1])&&(t=!1);if(t){e.figureCoord.x--;for(var i=0;i<=e.field[1].length-1;i++)for(var n=0;n<=e.field.length-1;n++)1===e.field[n][i]&&(e.field[n][i]=0,e.field[n][i-1]=1);e.setState({field:e.field})}},e.moveFigureRight=function(){for(var t=!0,a=e.field[1].length-1;a>=0;a--)for(var r=0;r<=e.field.length-1;r++)1===e.field[r][a]&&(a>=e.field[1].length-1||2===e.field[r][a+1])&&(t=!1);if(t){e.figureCoord.x++;for(var i=e.field[1].length-1;i>=0;i--)for(var n=0;n<=e.field.length-1;n++)1===e.field[n][i]&&(e.field[n][i]=0,e.field[n][i+1]=1);e.setState({field:e.field})}},e.moveFigureDown=function(){clearInterval(e.interval),e.interval=setInterval(e.moveFigure,10)},e.freezeFigure=function(){clearInterval(e.interval);for(var t=e.field.length-1;t>=0;t--)for(var a=0;a<=e.field[t].length-1;a++)1===e.field[t][a]&&(e.field[t][a]=2);e.figureCoord.x=0,e.figureCoord.y=0,e.setState({field:e.field}),e.clearFullRow(),e.loop()},e.clearFullRow=function(){var t=e.getFullRowIndex();if(t){for(var a=t;a>0;a--)for(var r=0;r<e.field[0].length;r++)e.field[a][r]=e.field[a-1][r];e.addScore(),e.clearFullRow()}},e.addScore=function(){e.score=e.score+10,e.setState({score:e.score})},e.getHiScore=function(){e.savedHiScore=parseInt(window.localStorage.getItem("hi-score-tetris")),e.setState({hiScore:e.savedHiScore?e.savedHiScore:0})},e.setHiScore=function(){e.score<e.savedHiScore||(window.localStorage.setItem("hi-score-tetris",e.score),e.getHiScore())},e.getFullRowIndex=function(){for(var t,a=e.field.length-1;a>=0;a--){t=!0;for(var r=0;r<=e.field[a].length-1;r++)0===e.field[a][r]&&(t=!1);if(t)return a}return!1},e.gameOver=function(){e.setState({isGameOver:!0}),clearInterval(e.interval),e.setHiScore()},e.startGame=function(){e.state.isGameOver&&(e.score=0,e.setState({isGameOver:!1,score:0}),e.field=e.field.map(function(e){return e.map(function(e){return 0})}),e.loop())},e.pauseGame=function(){e.state.isGameOver||(e.state.isPaused?(e.interval=setInterval(e.moveFigure,e.speed),e.setState({isPaused:!1})):(clearInterval(e.interval),e.setState({isPaused:!0})))},e.state={field:[[]],nextFigureField:[[]],isGameOver:!1,isPaused:!1,score:0,hiScore:0},e.speed=800,e.field=e.createField(20,10),e.nextFigureField=e.createField(5,5),e.pathIndex=0,e.isKeyUp=!0,e.figureCoord={x:0,y:0},e.lastRandomNumber=null,e.currentFigure=null,e.figurePath=null,e.figures=g,e.score=0,e.savedHiScore=null,e}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keyup",function(){return e.isKeyUp=!0}),this.getHiScore(),this.nextFigure=this.getRandomFigure(),this.loop()}},{key:"rotateFigure",value:function(){var e=this,t=!0;this.nextFigurePath=this.currentFigure.path[this.pathIndex+1],this.nextFigurePath.forEach(function(a){var r=a[0]+e.figureCoord.x,i=a[1]+e.figureCoord.y;(r>=e.field[0].length||i>=e.field.length||2===e.field[i][r])&&(t=!1)}),t&&(this.pathIndex=this.pathIndex>=this.currentFigure.path.length-2?-1:this.pathIndex+1,this.figurePath=this.nextFigurePath,this.field.forEach(function(t,a){return t.forEach(function(t,r){1===t&&(e.field[a][r]=0)})}),this.drawFigure(this.field,this.figurePath,this.figureCoord.x,this.figureCoord.y),this.setState({field:this.field}))}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"game"},i.a.createElement("div",{className:"game__frame--outer"},i.a.createElement("div",{className:"game__frame--middle"},i.a.createElement("div",{className:"game__frame--inner"},i.a.createElement(h,{field:this.state.field}),i.a.createElement("div",{className:"game__side-panel"},i.a.createElement(N,{title:"HI-SCORE",score:this.state.hiScore}),i.a.createElement(N,{title:"SCORE",score:this.state.score}),i.a.createElement(v,{nextFigureField:this.state.nextFigureField}),i.a.createElement(G,{isGameOver:this.state.isGameOver}))))),i.a.createElement(x,{handleClick:this.handleClick,pauseGame:this.pauseGame,startGame:this.startGame,isPaused:this.state.isPaused,isGameOver:this.state.isGameOver})))}}]),t}(i.a.Component),y=a(10),O=(a(30),{message:"This game can't be played in landscape orientation. Please rotate your device",bgColor:"var(--secondary-color)",color:"#ffff",iconColor:"#ffff",fontSize:4}),_=function(){return i.a.createElement("div",{className:"skin"},i.a.createElement(y.a,{options:O}),i.a.createElement(S,null))};l.a.render(i.a.createElement(_,null),document.getElementById("root"))}],[[12,1,3]]]);
//# sourceMappingURL=main.8bffa1d8.chunk.js.map